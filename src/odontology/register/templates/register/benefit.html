<div class="col-md-12" style="margin-bottom: 20px; margin-top: 20px;">
    <div class="col-md-6 no-padding">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-benefit">Nueva Ficha Mensual</button>
    {% if last_benefit %}
        <button id="edit_bf" type="button" class="btn btn-default" data-toggle="modal" data-target="#modal-edit-benefit" data-bf-id="{{last_benefit.id}}" data-csrf="{{ csrf_token }}" onclick="javascript:edit_benefit()">Editar Ficha Mensual</button>
    </div>
    <div class="col-md-3 col-md-offset-3 no-padding">
        <select id="select-benefit" class="selectpicker show-tick form-control">
          {% for bf in benefits %}
          <option value="{{bf.id}}" {% if bf == last_benefit %}selected="selected"{% endif %}>
            {{bf.month}} - {{bf.year}}
          </option>
          {% endfor %}
        </select>
    </div>
    {% else %}
    </div>
    {% endif %}
</div>

{% if last_benefit %}
  {% for bf in benefits %}
  <div id="benefit-{{bf.id}}" class="benefits" style="{% if not bf == last_benefit %}display: none;{% endif %}">
    <div class="col-md-12">
      <div class="panel panel-primary">
        <div class="panel-heading">Detalle de prestaciones <strong class="pull-right">{{bf.month}} - {{bf.year}}</strong></div>
        <div class="panel-body no-padding">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>#</th>
                <th width="100px">Dia</th>
                <th>Diente N&deg;</th>
                <th>Cara</th>
                <th>Codigo</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {% for detail in bf.get_details %}
                  {% include "register/detail_benefit.html" with counter=forloop.counter %}
              {% empty %}
              <tr>
                <td colspan="5" class="text-center">No hay detalles de prestaciones</td>
                <td width="5%">
                  <button type="button" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#modal-benefit-detail">
                    <i class="fa fa-pencil-square"></i> Editar Prestaci&oacute;n
                  </button>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      <hr>
    </div>

    <div class="col-md-12">
      <div class="panel panel-primary">
        <div class="panel-heading">Detalles de Ficha</div>
        <div class="panel-body no-padding">
          <table class="table table-bordered">
            <thead>
              <tr>
                <th width="150" class="text-center">C&oacute;digos de gest&iacute;on</th>
                <th>Observaciones</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-center" style="font-size: 15px;">{{bf.managment_code|default_if_none:"-"}}</td>
                <td>{{bf.observations|default_if_none:'-'}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <hr>
    </div>

    {% include "register/_form_radiography.html" %}

  </div>
  <script type="text/javascript">
    $(function () {
        var range = getMonthDateRange({{bf.year}}, {{bf.get_month_display}})
        $('.day-picker-{{bf.id}}').datetimepicker({
            viewMode: 'days',
            format: 'D',
            locale: 'es',
            minDate: range.start.toDate(),
            maxDate: range.end.toDate()
        });
    });
  </script>

  {% endfor %}

{% else %}
<div class="col-md-12">
  <h3>No existen regitros de prestaciones.</h3>
</div>
{% endif %}
